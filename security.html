<!DOCTYPE html>
<html>
<head>
    <title>VELOCISâ„¢ | Matrix Rebuild</title>
    <style>
        body { margin: 0; background: #05070a; font-family: -apple-system, sans-serif; color: #fff; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        /* THE VISUAL SHELL (Replacing the black void) */
        #matrix-viewport { flex: 1; position: relative; background: #0b111a; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        svg { width: 100%; height: 100%; transition: all 1s cubic-bezier(0.4, 0, 0.2, 1); }
        
        /* ARCHITECTURAL LAYERS */
        .terminal-floor { fill: #131b26; stroke: #1f2937; stroke-width: 3; }
        .active-path { stroke: #007AFF; stroke-width: 5; fill: none; stroke-dasharray: 10; opacity: 0.5; }
        
        /* MANEUVER ARROWS (Mapbox SDK Implementation) */
        .guidance-arrow { fill: #00f2ff; filter: drop-shadow(0 0 10px #00f2ff); opacity: 0; transition: opacity 0.5s; }
        .active { opacity: 1 !important; }

        /* THE MISSION HUD */
        #hud { height: 25vh; background: #0b111a; border-top: 3px solid #00f2ff; padding: 25px; box-sizing: border-box; box-shadow: 0 -10px 40px rgba(0,0,0,0.8); }
        .phase-tag { color: #00f2ff; font-size: 10px; font-weight: 900; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 8px; }
        .instruction-main { font-size: 24px; font-weight: 700; color: #ffffff; }
        button { margin-top: 15px; padding: 12px 35px; background: #00f2ff; color: #000; border: none; border-radius: 8px; font-weight: 800; cursor: pointer; text-transform: uppercase; }
    </style>
</head>
<body>

<div id="matrix-viewport">
    <svg id="matrix-svg" viewBox="0 0 1000 400">
        <path class="terminal-floor" d="M 50 100 L 950 100 L 950 300 L 50 300 Z" />
        
        <path class="active-path" d="M 80 200 L 250 200 L 500 150 L 900 150" />

        <polygon id="arrow-kiosk" class="guidance-arrow" points="230,190 260,200 230,210" />
        <polygon id="arrow-tsa" class="guidance-arrow active" points="480,140 510,150 480,160" />
        <polygon id="arrow-gate" class="guidance-arrow" points="880,140 910,150 880,160" />

        <text x="70" y="235" fill="#4b5563" font-size="12" font-weight="bold">ENTRANCE</text>
        <text x="220" y="235" fill="#4b5563" font-size="12" font-weight="bold">KIOSKS</text>
        <text x="470" y="130" fill="#4b5563" font-size="12" font-weight="bold">SECURITY D</text>
        <text x="870" y="130" fill="#00f2ff" font-size="14" font-weight="bold">GATE D34</text>

        <circle id="passenger-dot" cx="80" cy="200" r="10" fill="#00f2ff" />
    </svg>
</div>

<div id="hud">
    <div id="phase-tag" class="phase-tag">Mission: Arrival</div>
    <div id="instruction" class="instruction-main">Follow signs to Kiosk Block 4.</div>
    <button onclick="advanceMission()">Simulate Next Sign</button>
</div>

<script>
    let missionStep = 0;
    const missionData = [
        { cx: 250, cy: 200, arrow: "arrow-kiosk", tag: "CHECK-IN", text: "Kiosks reached. Head to Security D.", view: "0 50 1000 400" },
        { cx: 500, cy: 150, arrow: "arrow-tsa", tag: "SECURITY", text: "Security D Cleared. Proceed to D34.", view: "200 50 800 300" },
        { cx: 900, cy: 150, arrow: "arrow-gate", tag: "GATE REACHED", text: "Welcome to Gate D34. Safe Flight!", view: "400 50 600 300" }
    ];

    function advanceMission() {
        if (missionStep < missionData.length) {
            const data = missionData[missionStep];
            
            // 1. Move the Brain
            const dot = document.getElementById('passenger-dot');
            dot.setAttribute('cx', data.cx);
            dot.setAttribute('cy', data.cy);

            // 2. Update Arrows (ManeuverArrow Logic)
            document.querySelectorAll('.guidance-arrow').forEach(a => a.classList.remove('active'));
            document.getElementById(data.arrow).classList.add('active');

            // 3. Update Camera (The Auto-Pan)
            document.getElementById('matrix-svg').setAttribute('viewBox', data.view);

            // 4. Update HUD
            document.getElementById('phase-tag').innerText = `Mission: ${data.tag}`;
            document.getElementById('instruction').innerText = data.text;

            missionStep++;
        }
    }
</script>
</body>
</html>
