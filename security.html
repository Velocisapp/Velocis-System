<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>VELOCIS™ NAV ENGINE</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.1.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.1.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin: 0; background: #000; font-family: 'Courier New', monospace; color: white; overflow: hidden; height: 100vh; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; z-index: 1; }
        
        /* High-Fidelity UI Overlays */
        #nav-banner {
            position: fixed; top: 15px; left: 50%; transform: translateX(-50%);
            width: 92%; background: rgba(0, 80, 255, 0.85); backdrop-filter: blur(15px);
            padding: 15px; border-radius: 12px; z-index: 1000; display: none;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .dist-text { font-size: 28px; font-weight: 900; }
        
        .discreet-window {
            position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%);
            width: 85%; background: rgba(10, 20, 30, 0.9); backdrop-filter: blur(20px);
            padding: 20px; border-radius: 16px; z-index: 1100; border: 1px solid #39FF14;
        }
        input { width: 70%; background: #222; border: 1px solid #39FF14; color: #39FF14; padding: 12px; border-radius: 8px; }
        .dive-btn { background: #39FF14; color: #000; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 900; }
    </style>
</head>
<body>

    <div id="nav-banner">
        <div class="dist-text">↑ 0.2 mi</div>
        <div style="font-size: 14px;">Concourse D - Gate D48</div>
    </div>

    <div id="map"></div>

    <div class="discreet-window">
        <div style="font-size: 10px; opacity: 0.6; letter-spacing: 2px;">TARGETING SYSTEM</div>
        <div style="margin: 10px 0;">HUB: MIA | GATE: <span id="gate-target" style="color:#39FF14;">--</span></div>
        <div style="display:flex; gap:10px;">
            <input type="text" id="flight-input" placeholder="AA245">
            <button class="dive-btn" onclick="engageNav()">DIVE</button>
        </div>
    </div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoidmVsb2Npc2RldmVsb3BlciIsImEiOiJjbWtyanA4NHcxNHk0M2twcXNibXhvdnVhIn0.9sLk_qMET9czvmbYPZ9Bkg';

        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/navigation-night-v1', // High-Nav Specific Style
            center: [-80.2871, 25.7959],
            zoom: 17, pitch: 60, bearing: 0, antialias: true
        });

        map.on('load', () => {
            // ACTIVATE 3D BUILDINGS FOR DEPTH
            map.addLayer({
                'id': '3d-buildings',
                'source': 'composite',
                'source-layer': 'building',
                'filter': ['==', 'extrude', 'true'],
                'type': 'fill-extrusion',
                'minzoom': 15,
                'paint': {
                    'fill-extrusion-color': '#222',
                    'fill-extrusion-height': ['get', 'height'],
                    'fill-extrusion-base': ['get', 'min_height'],
                    'fill-extrusion-opacity': 0.6
                }
            });

            // ADD DYNAMIC LIGHTING
            map.setLight({ anchor: 'viewport', color: '#fff', intensity: 0.3 });
        });

        function engageNav() {
            document.getElementById('nav-banner').style.display = 'block';
            document.getElementById('gate-target').innerText = 'D48';

            map.flyTo({
                center: [-80.2828, 25.7960],
                zoom: 19.5,
                pitch: 75, // Steep angle for Nav perspective
                bearing: -20,
                speed: 0.5,
                curve: 1
            });
        }
    </script>
</body>
</html>
