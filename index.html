<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        body { margin: 0; background: #000 !important; overflow: hidden; font-family: sans-serif; }
        
        #status-ticker {
            position: fixed; top: 0; width: 100%; background: rgba(0, 255, 255, 0.15);
            color: #00ffff; font-size: 10px; font-weight: 900; padding: 6px 0;
            z-index: 10002; border-bottom: 1px solid rgba(0, 255, 255, 0.4);
            text-align: center; letter-spacing: 2px; text-transform: uppercase;
            backdrop-filter: blur(5px);
        }

        #brand { position: fixed; top: 45px; width: 100%; text-align: center; letter-spacing: 12px; z-index: 9999 !important; pointer-events: none; }
        #brand h1 { color: #FFD700 !important; font-weight: 900 !important; text-shadow: 0 0 10px rgba(255, 215, 0, 0.7), 2px 2px 5px #000; margin: 0; } 
        
        #arrival-modal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 85%; background: rgba(255, 91, 0, 0.98); backdrop-filter: blur(20px);
            color: white; padding: 25px; border-radius: 15px; border: 2px solid #fff;
            z-index: 20000; text-align: center; box-shadow: 0 0 50px rgba(255, 91, 0, 0.5);
            pointer-events: auto !important;
        }

        /* ONBOARDING OVERLAY STYLES */
        #install-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.98); z-index: 30000; color: white;
            flex-direction: column; align-items: center; justify-content: center;
            text-align: center; backdrop-filter: blur(15px);
        }
        .install-step { margin: 20px; font-size: 1.1rem; font-weight: bold; }
        .install-icon { font-size: 2rem; color: #00ffff; display: block; margin-bottom: 10px; }
        
        /* ANIMATED POINTING ARROW */
        #pointing-arrow {
            position: absolute; bottom: 20px; font-size: 3rem; color: #00ffff;
            animation: arrow-bounce 1s infinite;
        }
        @keyframes arrow-bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(15px); } }

        /* VANISHING LOGIC */
        @media (display-mode: standalone) {
            #beta-invite { display: none !important; }
        }

        #travel-guides { 
            position: absolute; top: 72%; left: 50%; transform: translate(-50%, -50%); 
            width: 92%; height: 210px; max-height: 210px; overflow-y: scroll; 
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(12px); color: #fff; 
            padding: 15px; border-radius: 12px; border: 1px solid rgba(0, 212, 255, 0.4); 
            z-index: 2000; text-align: center;
        }
        #transport-menu { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); display: flex; justify-content: center; gap: 10px; width: 98%; z-index: 10000 !important; }
        .icon-btn { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; border: 2px solid rgba(0, 255, 255, 0.5); border-radius: 50%; background: rgba(0, 255, 255, 0.1); font-size: 1.4rem; cursor: pointer; }
    </style>
</head>
<body style="margin: 0; background: #000; overflow: hidden;">

    <div id="status-ticker">SYNCHRONIZING GLOBAL TIME...</div>

    <div id="install-overlay">
        <h2 style="color: #FFD700; letter-spacing: 5px;">INSTALL VELOCIS™</h2>
        <div class="install-step"><span class="install-icon">⎋</span> 1. Tap the 'Share' icon below.</div>
        <div class="install-step"><span class="install-icon">⊞</span> 2. Select 'Add to Home Screen'.</div>
        <div class="install-step"><span class="install-icon">✅</span> 3. Mission Control is ready.</div>
        <div id="pointing-arrow">↓</div>
        <div onclick="toggleInstall(false)" style="margin-top: 50px; color: #FFD700; text-decoration: underline; font-weight: 900; cursor: pointer;">RETURN</div>
    </div>

    <div id="arrival-modal">
        <h2 id="mission-status" style="margin: 0; text-transform: uppercase;">SCANNING FOR FLIGHT...</h2>
        <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2); margin: 15px 0;">
            <p id="carousel-number" style="margin: 0; font-weight: 900; font-size: 1.8rem;">INITIATING...</p>
            <p id="terminal-id" style="margin: 5px 0 0 0; font-size: 0.9rem; color: #00ffff; font-weight: bold; letter-spacing: 2px; text-transform: uppercase;"></p>
        </div>
        <button onclick="closeArrival()" style="background: none; color: white; border: none; padding: 10px; cursor: pointer; text-decoration: underline; font-weight: bold;">Dismiss</button>
    </div>

    <div id="brand"><h1>VELOCIS™</h1><p style="color: #00ffff; font-size: 0.6rem; letter-spacing: 5px; margin: 0;">GLOBAL MOBILITY COMMAND</p></div>

    <div id="beta-invite" style="position: absolute; top: 15%; width: 100%; text-align: center; z-index: 1001;">
        <div style="background: white; color: black; padding: 20px; border-radius: 12px; display: inline-block; width: 85%;">
            <h2 style="margin: 0; font-size: 1.1rem;">VELOCIS™ BETA AVAILABLE</h2>
            <button onclick="toggleInstall(true)" style="background: #000; color: white; border: none; padding: 12px 25px; font-weight: bold; border-radius: 6px; cursor: pointer; margin-top: 15px; width: 100%;">Install VELOCIS (Free)</button>
        </div>
    </div>

    <script>
        let arrivalCityTime = ""; 

        /* OVERLAY CONTROL */
        function toggleInstall(show) {
            document.getElementById('install-overlay').style.display = show ? 'flex' : 'none';
        }

        function updateTicker() {
            const now = new Date();
            const localTime = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const options = { hour: '2-digit', minute: '2-digit', timeZone: arrivalCityTime || 'Europe/Paris' };
            const missionTime = now.toLocaleTimeString([], options);
            document.getElementById('status-ticker').innerText = `LOCAL: ${localTime} | DESTINATION: ${missionTime} | COMMAND ACTIVE`;
        }
        setInterval(updateTicker, 1000);

        async function fetchFlightData() {
            const ACCESS_KEY = 'b872fb58a154f90cc42b93589772a8e4'; 
            const FLIGHT_IATA = 'UA54'; 
            try {
                const response = await fetch(`https://api.aviationstack.com/v1/flights?access_key=${ACCESS_KEY}&flight_iata=${FLIGHT_IATA}`);
                const result = await response.json();
                if (result.data && result.data.length > 0) {
                    const flight = result.data[0];
                    document.getElementById('carousel-number').innerText = `CAROUSEL ${flight.arrival.baggage || "WAITING..."}`;
                    document.getElementById('mission-status').innerText = `${flight.airline.name.toUpperCase()} IDENTIFIED`;
                    document.getElementById('terminal-id').innerText = `ARRIVAL TERMINAL: ${flight.arrival.terminal || "1"}`;
                    arrivalCityTime = flight.arrival.timezone || 'Europe/Paris';
                }
                document.getElementById('arrival-modal').style.display = 'block'; 
            } catch (error) { document.getElementById('arrival-modal').style.display = 'block'; }
        }

        window.addEventListener('load', () => { setTimeout(fetchFlightData, 3000); });
        
        // [Existing P5.js code preserved]
    </script>
</body>
</html>
